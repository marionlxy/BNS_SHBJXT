<div class="layer">
  <form  id="plateform" method="post" name="plateform" action="${ctxPath!}/pt/FunConfMapper/saveBasFunConf?Mlcid=${Mlcid}" >
    <input type="hidden" value="${Mlcid!}" id="Mlcid" name="Mlcid"/>
    <table class="EditTable" width="100%">
    		<tr class="FormData">
			<tr class="FormData">
				<td class="CaptionTD" name="">功能编码:</td>
				<td class=""><input style="width: 100%"  type="text" name="functionCode"  value="" 
					ajaxurl="${ctxPath!}/pt/FunConfMapper/valiBasFunConfSysCode?Mlcid = ${Mlcid}"  
					@if(Mlcid=="2"){
						datatype="/^[f][u][n][1][1][0-9]{2}$/" errormsg="输入以”fun11“开头的编码，例如1101"
					@}else if(Mlcid=="3"){
						datatype="/^[f][u][n][1][2][0-9]{2}$/" errormsg="输入以”fun12“开头的编码，例如1201"
					@}else if(Mlcid=="4"){
						datatype="/^[f][u][n][1][3][0-9]{2}$/" errormsg="输入以”fun13“开头的编码，例如1301"
					@}else if(Mlcid=="5"){
						datatype="/^[f][u][n][1][4][0-9]{2}$/" errormsg="输入以”fun14“开头的编码，例如1401"
					@}else if(Mlcid=="6"){
						datatype="/^[f][u][n][1][5][0-9]{2}$/" errormsg="输入以”fun15“开头的编码，例如1501"
					@}else if(Mlcid=="8"){
						datatype="/^[f][u][n][2][1][0-9]{2}$/" errormsg="输入以”fun21“开头的编码，例如2101"
					@}else if(Mlcid=="9"){
						datatype="/^[f][u][n][2][2][0-9]{2}$/" errormsg="输入以”fun22“开头的编码，例如2201"
					@}		
					/>
			</tr>
			</tr>
			<tr class="FormData">
				<td class="CaptionTD">功能名称:</td>
				<td class=""><input style="width: 100%"  type="text" name="functionName" datatype="*" nullmsg="" 	ajaxurl="" value="" />
				</td>
			</tr>
			<tr class="FormData">
				<td class="CaptionTD">委员会文本:</td>
				<td class=""><input style="width: 100%"  type="text" name="commtext" datatype="*" nullmsg="" 	ajaxurl="" value="" />
				</td>
			</tr>
			<tr class="FormData">
				<td class="CaptionTD">绑定事件或URL:</td>
				<td class=""><input style="width: 100%"  type="text" name="bindEventOrUrl" value="" />
				</td>
			</tr>
			<tr class="FormData">
				<td class="CaptionTD">使用模板名称:</td>
				<td class="DataTD width-100" >
			<select name="tempId" id="template-chosen" style="font-size:12px;width:408px;background-color:white">
				<option value="" selected="selected">---请选择---</option>
                 @for(bindGroup in list1!){
					<option value="${bindGroup.id!}">
					   ${bindGroup.name!}
					</option>
				@}
	         </select>
			</td>
			</tr>
			<tr class="FormData">
				<td class="CaptionTD">跳转前处理方法:</td>
				<td class=""><input style="width: 100%" type="text" name="skipClassMethod" value="" />
				</td>
			</tr>
			<tr class="FormData">
					<td class="CaptionTD">图标：</td>
					<td>
					<#iconselect/>
					</td>
				</tr>
			<tr class="FormData">
				<td class="CaptionTD ">是否启用:</td>
				<td class="">
					<input  name="useFlag" type="checkbox" value="1" checked="checked"/>启用							
				</td>
			</tr>
    </table>
    		<div class="clearfix" tag-save-btn style="bottom: 0px;left: 35%;position:absolute;">
				<input type="submit" class="btn btn-primary btn-sm bigger-110"   value="保存" id="submitForm" />
				<input type="button" class="btn btn-primary btn-sm bigger-110"   value="取消 " id="model-update-cancel" />
			</div>
  </form>   
</div>
<script type="text/javascript">
	//$("#template-chosen").chosen({width: "100%",search_contains: false,disable_search_threshold:10});
			var index = layer.index;
				$("#model-update-cancel").click(function(){
				layer.close(index);
				layer.closeAll('tips');
			});
			$("#plateform").Validform({
			      	 ajaxPost:true,
			         tiptype : 4,
			              beforeSubmit:function(curform){
			                  var loadi = layer.load(5,2);
			                  $("#plateform").data('loadi',loadi);
			              },
			              tiptype : function(msg, o, cssctl) {
			                  if (!o.obj.is("form")) {
			                      if (o.type != 2) {
			                          tip.errorTip(msg,o.obj);
			                      }
			                  }
			              },
			              tipSweep : true,
			              callback:function(data){
			      			layer.close($("#plateform").data('loadi'));
			      			if(data.code=="1"){
			      				layer.msg(data.msg, 1, 1,function(){
			      				});
			      				layer.closeAll('page'); 
			      				$("#tableysxm").bootstrapTable('refresh');
			      			}else{
			      				layer.msg(data.msg,3,1);
			      				layer.closeAll('page');
			      			}
			      		}
			          });
				
</script>

