<div class="layer">
	 <form name="FormPost" id="dic-save" class="FormGrid"  method="post"
          action="">
        <input type="hidden" value="${basFunConf.id}" name="id"/>
        <input type="hidden" value="${useFlag}" name="useFlag"/>
	    <table class="EditTable" width="100%">
	    	<tr class="FormData">
	    	<tr class="FormData">
				<td class="CaptionTD">功能编码:</td>
				<td class="DataTD width-100"><input readonly="readonly" name="functionCode"  value="${basFunConf.functionCode}" type="text" >
				</td>
			</tr>
			</tr>
			<tr class="FormData">
				<td class="CaptionTD">委员会文本:</td>
				<td class=""><input style="width: 408px" name="commtext"  value="${basFunConf.commtext}" type="text">
				</td>
			</tr>
			<tr class="FormData">
				<td class="CaptionTD">使用模板名称:</td>
				<td>
			<select name="tempId" id="template-chosen" style="font-size:12px;width:408px;background-color:white">
				<option  value="  " selected="selected">---请选择---</option>
                 @for(bindGroup in list1!){
						<option value="${bindGroup.id!}"  ${decode(bindGroup.id,basFunConf.tempId!,"selected","")}>
						   ${bindGroup.name!}
						</option>
					@}
	         </select>
			</td>
			</tr>
			<tr class="FormData">
				<td class="CaptionTD">跳转前处理方法:</td>
				<td class=""><input type="text" style="width: 408px" name="skipClassMethod" value="${basFunConf.skipClassMethod}" />
				</td>
			</tr>
			<tr class="FormData">
					<td class="CaptionTD">图标：</td>
					<td>
					<#iconselect value="${basFunConf.icon}"/>
					</td>
				</tr>
		</table>
	</form>

</div>
		<div class="clearfix"  style="bottom: 0px;left: 36%;position:absolute;">
			<span class="btn btn-primary btn-sm bigger-110"  id="submitForm">确定</span>&nbsp;&nbsp;
			<span class="btn btn-primary btn-sm bigger-110" id="dic-save-cancel">取消</span>
	</div>

<script type="text/javascript">
//$("#template-chosen").chosen({width: "100%",search_contains: false,disable_search_threshold:10});
$(function(){
	
	var index = layer.index;
    //提交时有一个bug,当修改时，如果ajaxurl验证方式的文本框框没有点击过时，不会提交
    var ajaxS = $("#dic-save input[ajaxurl]");
    $.each(ajaxS,function(i,obj){
        $(obj).focus();
    })

    var validId = $("#dic-save").Validform({
    	tiptype : 4,
        ajaxPost : true,
        beforeSubmit:function(curform){
            var loadi = layer.load(5,2);
            $("#dic-save").data('loadi',loadi);
            curform.ajaxSubmit({
            	type:'post',
            	url:'${ctxPath!}/pt/FunConfMapper/saveBasFunConf?Mlcid=${basFunConf.mlcid}',
            	success:function(data){
                    layer.close($("#dic-save").data('loadi'));
                    layer.msg(data.msg,1,1);
        	    	if(data.code==1){
        	    		var sys = parent.document.getElementById("tableysxm");
        	    		var $sys = $(sys);
        	    		$sys.bootstrapTable('refresh');
        	    		layer.close(lastIndex);
        	    		
        	    	}
            	}
            });
        },
        tiptype : function(msg, o, cssctl) {
            if (!o.obj.is("form")) {
                if (o.type != 2) {
                    tip.errorTip(msg,o.obj);
                }
            }
        },
        tipSweep : true
    });

    $("#submitForm").click(function() {
        validId.submitForm(false);
        return false;
    });

    $("#dic-save-cancel").click(function(){
        layer.close(layer.index);
    });

    $("#dic-save input,#dic-save textarea").blur(function(){
        layer.closeTips();
        return false;
    })

});
var index = layer.index;
$("#dic-save-cancel").click(function(){
    layer.close(index);
});

</script>
