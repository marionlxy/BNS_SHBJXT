<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.krm.voteplateform.web.menuwinconf.dao.BasMenuWinConfTableMapper" >
	<sql id="BaseColumnList">
		ID,FUNCTION_CODE,GROUPID,TYPE,
		NAME,NULL_FLAG,COLLECT_TYPE,DATASOURCE,BIND_FILED,
		BIND_EVENT_OR_URL,ORDER_CODE,
		USE_FLAG,DEL_FLAG,CREATE_TIME,CREATE_BY,
		UPDATE_TIME,UPDATE_BY
	</sql>
	<sql id="BaseColumnValueList">
		#{id,jdbcType=VARCHAR},#{functionCode,jdbcType=VARCHAR},#{groupid,jdbcType=VARCHAR},
		#{type,jdbcType=VARCHAR},#{name,jdbcType=VARCHAR},#{nullFlag,jdbcType=VARCHAR},
		#{collectType,jdbcType=VARCHAR},#{datasource,jdbcType=VARCHAR},#{bindFiled,jdbcType=VARCHAR},
		#{bindEventOrUrl,jdbcType=VARCHAR},#{orderCode,jdbcType=Integer},#{useFlag,jdbcType=VARCHAR},
		#{delFlag,jdbcType=VARCHAR},#{createBy,jdbcType=VARCHAR},#{updateBy,jdbcType=VARCHAR},
		#{createTime,jdbcType=TIMESTAMP},#{updateTime,jdbcType=VARCHAR}
	</sql>
	 <select id="showadd" resultType="java.util.Map" parameterType="java.util.Map">
		select
		<include refid="BaseColumnList" />
		from ${code}_BAS_MENU_WIN_CONF
		<where>
			FUNCTION_CODE = '${functionCode}' AND USE_FLAG=0   AND TYPE = 3 
		</where>
	</select>
	<select id="selectCommtext" resultType="com.krm.voteplateform.web.menuwinconf.model.BasMenuWinConf" parameterType="java.util.Map">
		select
		<include refid="BaseColumnList" />
		from #{tableName}_BAS_MENU_WIN_CONF
		<where>
			ID=#{id}
		</where>
	</select>
	<select id="showpull" resultType="com.krm.voteplateform.web.menuwinconf.model.BasMenuWinConf" parameterType="java.util.Map">
		select
			ID,NAME,GROUPID
		from ${code}_BAS_MENU_WIN_CONF
		<where>
		TYPE=0 and USE_FLAG=0 
		AND FUNCTION_CODE = '${functionCode}' AND DEL_FLAG = 0 
		</where>
	</select>
	<update id="lastsave" parameterType="java.util.Map">
		update
				 ${code}_BAS_MENU_WIN_CONF 
		set
				NAME = #{a.name}
		where ID=#{a.id}
	</update>
	<select id="findSelectGroupList" resultType="java.util.Map" parameterType="java.util.Map">
		    select GROUPID,ID from  #{tableName}_BAS_MENU_WIN_CONF 
		<where>
  			GROUPID like #{groupid,jdbcType=VARCHAR}
		</where>
	</select>
	
	<select id="getBtnOrder" parameterType="java.util.Map" resultType="java.util.Map">
		 select * from #{tableName}_BAS_MENU_WIN_CONF WHERE function_code=#{functionCode} and GROUPID = #{groupId} AND DEL_FLAG = 0 AND USE_FLAG = 0 and TYPE = 0
	</select>
</mapper>